

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>LOFT-Q GPIO 使用 &mdash; Mixtile Project documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Mixtile Project documentation" href="../../index.html"/>
        <link rel="up" title="中文文档" href="../../zh_root.html"/>
        <link rel="next" title="LOFT-Q 简介" href="zh-intro.html"/>
        <link rel="prev" title="Android adb 网络调试" href="zh-android-network-debug.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../../index.html" class="icon icon-home"> mixtile
        

        
          
          <img src="../../_static/mixtile-logo.png" class="logo" />
        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../zh_root.html">中文文档</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../zh_root.html#loft-q">LOFT-Q 相关文档</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="zh-android-cust.html">LOFT-Q Android 定制化指南</a></li>
<li class="toctree-l3"><a class="reference internal" href="zh-android-network-debug.html">Android adb 网络调试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zh-android-network-debug.html#id1">前期准备</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-android-network-debug.html#gnu-linux">GNU/Linux 系统准备</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-android-network-debug.html#windows">Windows 系统准备</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-android-network-debug.html#adb">连接网络 ADB</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-android-network-debug.html#eclipse">Eclipse 调试</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-android-network-debug.html#id3">注意事项</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="">LOFT-Q GPIO 使用</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">介绍</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gpio">GPIO 引脚说明</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">GPIO 内核配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">GPIO 使用示例</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">更多参考</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="zh-intro.html">LOFT-Q 简介</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zh-intro.html#id1">开放硬件</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-intro.html#id2">软件介绍</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-intro.html#id3">硬件介绍</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="zh-jn5168-guide.html">LOFT-Q JN5168 使用说明</a></li>
<li class="toctree-l3"><a class="reference internal" href="zh-legacy-driver-guide.html">LOFT-Q 旧版内核驱动指南</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zh-legacy-driver-guide.html#id1">驱动介绍</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-legacy-driver-guide.html#id3">内核驱动结构</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="zh-legacy-quick-guide.html">LOFT-Q 旧版系统快速指南</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zh-legacy-quick-guide.html#id1">旧版环境准备</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-legacy-quick-guide.html#uboot">旧版 UBoot 构建</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-legacy-quick-guide.html#linux">旧版 Linux 内核构建</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-legacy-quick-guide.html#buildroot">Buildroot 构建</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-legacy-quick-guide.html#android">Android 构建使用</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="zh-mainline-quick-guide.html">LOFT-Q 主流系统快速指南</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zh-mainline-quick-guide.html#uboot">主流 Uboot 构建</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-mainline-quick-guide.html#linux">主流 Linux 构建</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-mainline-quick-guide.html#debian">Debian 构建</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-mainline-quick-guide.html#ubuntu">Ubuntu 构建</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-mainline-quick-guide.html#opensuse">OpenSUSE 使用</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-mainline-quick-guide.html#id8">更多说明</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="zh-owncloud-howto.html">LOFT-Q Owncloud 说明</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zh-owncloud-howto.html#debian">Debian 配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-owncloud-howto.html#opensuse">openSUSE 配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-owncloud-howto.html#id1">更多参考</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="zh-product-intro.html">LOFT-Q 产品说明</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zh-product-intro.html#id1">产品概述</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-product-intro.html#id2">产品特性</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-product-intro.html#id3">产品配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-product-intro.html#id5">硬件详细参数</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-product-intro.html#id15">软件资源</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="zh-seafile-howto.html">LOFT-Q Seafile 说明</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zh-seafile-howto.html#debian-chroot">配置 Debian chroot 环境</a></li>
<li class="toctree-l4"><a class="reference internal" href="zh-seafile-howto.html#seafile">编译 Seafile 服务软件</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../zh_root.html#gena">GENA 相关文档</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../en_root.html">English Documents</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../en_root.html#loft-q">LOFT-Q</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../en/loftq/en-android-cust.html">LOFT-Q Android Customization guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../en/loftq/en-intro.html">LOFT-Q Introduction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-intro.html#open-hardware">Open Hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-intro.html#software">Software</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-intro.html#hardware">Hardware</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../en/loftq/en-legacy-quick-guide.html">LOFT-Q Quick Guide for Lebacy Kernel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-legacy-quick-guide.html#lebacy-build-environment">Lebacy Build Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-legacy-quick-guide.html#legacy-uboot-building">Legacy Uboot Building</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-legacy-quick-guide.html#legacy-linux-kernel-building">Legacy Linux Kernel Building</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-legacy-quick-guide.html#buildroot-building">Buildroot building</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-legacy-quick-guide.html#android-building">Android building</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../en/loftq/en-mainline-quick-guide.html">LOFT-Q Quick Guide for mainline kernel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-mainline-quick-guide.html#mainline-u-boot-building">Mainline u-boot building</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-mainline-quick-guide.html#mainline-kernel-building">Mainline kernel building</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-mainline-quick-guide.html#debian-building">Debian building</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-mainline-quick-guide.html#ubuntu-building">Ubuntu building</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-mainline-quick-guide.html#opensuse">OpenSUSE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-mainline-quick-guide.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../en/loftq/en-owncloud-howto.html">LOFT-Q Owncloud Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-owncloud-howto.html#owncloud-for-debian">Owncloud for Debian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-owncloud-howto.html#owncloud-for-opensuse">Owncloud for openSUSE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-owncloud-howto.html#reference">Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../en/loftq/en-seafile-howto.html">LOFT-Q Seafile Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-seafile-howto.html#debian-chroot-setup">Debian chroot setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../en/loftq/en-seafile-howto.html#seafile-service-building">Seafile Service building</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../en_root.html#gena">GENA</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">mixtile</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../zh_root.html">中文文档</a> &raquo;</li>
      
    <li>LOFT-Q GPIO 使用</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/zh/loftq/zh-gpio-guide.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="loft-q-gpio">
<h1><a class="toc-backref" href="#id7">LOFT-Q GPIO 使用</a><a class="headerlink" href="#loft-q-gpio" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">组织:</th><td class="field-body">Mixtile Team</td>
</tr>
<tr class="field-even field"><th class="field-name">版本:</th><td class="field-body">0.1</td>
</tr>
<tr class="field-odd field"><th class="field-name">日期:</th><td class="field-body">2015.07.07</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="id1">
<p class="topic-title first">内容</p>
<ul class="simple">
<li><a class="reference internal" href="#loft-q-gpio" id="id7">LOFT-Q GPIO 使用</a><ul>
<li><a class="reference internal" href="#id2" id="id8">介绍</a></li>
<li><a class="reference internal" href="#gpio" id="id9">GPIO 引脚说明</a><ul>
<li><a class="reference internal" href="#expansion-csi-mipidsi-j4" id="id10">EXPANSION CSI/MIPI‐DSI &#8212; J4</a></li>
<li><a class="reference internal" href="#expansion-gpio-j5" id="id11">EXPANSION GPIO &#8212; J5</a></li>
<li><a class="reference internal" href="#expansion-lvds-j6" id="id12">EXPANSION LVDS &#8212; J6</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3" id="id13">GPIO 内核配置</a></li>
<li><a class="reference internal" href="#id4" id="id14">GPIO 使用示例</a><ul>
<li><a class="reference internal" href="#id5" id="id15">命令行访问和测试</a></li>
<li><a class="reference internal" href="#c" id="id16">C语言访问和测试</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6" id="id17">更多参考</a></li>
</ul>
</li>
</ul>
</div>
<p>LOFT-Q 提供了众多的 GPIO 口用于开发者根据自己的需要进行扩展。不过这些 GPIO 的使用需要配合具体的扩展板才能使用。</p>
<p>对于 GPIO 的使用需要在内核中启用相关的配置，然后就可以在应用程序中使用相关的 GPIO 进行操作。</p>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id8">介绍</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>LOFT-Q 提供了 3 个 FPC 座子，分别为 J4, J5, J6，其中每个提供 60 针的 GPIO 支持，所有合计有 180 针的 GPIO 可供使用。具体的每个针脚的说明可以参考 <a class="reference internal" href="#gpio">GPIO 引脚说明</a> 。如下图为 LOFT-Q 各个部分的简略图，其中有关 GPIO 的对照如下：</p>
<ul class="simple">
<li>2 Expansion CSI/MIPI-DSI 为摄像头所用 IO 口，也可以作为通用 GPIO 使用。</li>
<li>3 Expansion LVDS 为显示屏，触摸屏所用 IO 口，也可以作为通用 GPIO 使用。</li>
<li>5 Expansion CSPIO 包含一些可用作 SPI，UART，I2C 等接口的 GPIO, 以及通用的 GPIO。</li>
</ul>
<a class="reference internal image-reference" href="../../_images/loftq-interface-map.png"><img alt="../../_images/loftq-interface-map.png" class="align-center" src="../../_images/loftq-interface-map.png" style="width: 100%;" /></a>
</div>
<div class="section" id="gpio">
<h2><a class="toc-backref" href="#id9">GPIO 引脚说明</a><a class="headerlink" href="#gpio" title="Permalink to this headline">¶</a></h2>
<div class="section" id="expansion-csi-mipidsi-j4">
<h3><a class="toc-backref" href="#id10">EXPANSION CSI/MIPI‐DSI &#8212; J4</a><a class="headerlink" href="#expansion-csi-mipidsi-j4" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="27%" />
<col width="27%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">引脚号</th>
<th class="head">功能</th>
<th class="head">引脚号</th>
<th class="head">功能</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>CSI-D0</td>
<td>2</td>
<td>CSI-D1</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>CSI-D2</td>
<td>4</td>
<td>CSI-D3</td>
</tr>
<tr class="row-even"><td>5</td>
<td>CSI-D4</td>
<td>6</td>
<td>CSI-D5</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>CSI-D6</td>
<td>8</td>
<td>CSI-D7</td>
</tr>
<tr class="row-even"><td>9</td>
<td>CSI-D8</td>
<td>10</td>
<td>CSI-D9</td>
</tr>
<tr class="row-odd"><td>11</td>
<td>CSI-D10</td>
<td>12</td>
<td>CSI-D11</td>
</tr>
<tr class="row-even"><td>13</td>
<td>GND</td>
<td>14</td>
<td>CSI-HSYNC</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>CSI-VSYNC</td>
<td>16</td>
<td>TWI0-SCK</td>
</tr>
<tr class="row-even"><td>17</td>
<td>TWI0-SDA</td>
<td>18</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>19</td>
<td>CSI-MCLK</td>
<td>20</td>
<td>CSI-PCLK</td>
</tr>
<tr class="row-even"><td>21</td>
<td>GND</td>
<td>22</td>
<td>VDD1V8-CSI</td>
</tr>
<tr class="row-odd"><td>23</td>
<td>VDD1V8-CSI</td>
<td>24</td>
<td>GND</td>
</tr>
<tr class="row-even"><td>25</td>
<td>VCC-5V</td>
<td>26</td>
<td>VCC-5V</td>
</tr>
<tr class="row-odd"><td>27</td>
<td>GND</td>
<td>28</td>
<td>VCC-3V3</td>
</tr>
<tr class="row-even"><td>29</td>
<td>VCC-3V3</td>
<td>30</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>31</td>
<td>MCSI-MCLK</td>
<td>32</td>
<td>NC</td>
</tr>
<tr class="row-even"><td>33</td>
<td>NC</td>
<td>34</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>35</td>
<td>DSI-D0N</td>
<td>36</td>
<td>DSI-D0P</td>
</tr>
<tr class="row-even"><td>37</td>
<td>GND</td>
<td>38</td>
<td>DSI-D1N</td>
</tr>
<tr class="row-odd"><td>39</td>
<td>DSI-D1P</td>
<td>40</td>
<td>GND</td>
</tr>
<tr class="row-even"><td>41</td>
<td>DSI-D2N</td>
<td>42</td>
<td>DSI-D2P</td>
</tr>
<tr class="row-odd"><td>43</td>
<td>GND</td>
<td>44</td>
<td>DSI-D3N</td>
</tr>
<tr class="row-even"><td>45</td>
<td>DSI-D3P</td>
<td>46</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>47</td>
<td>DSI-CKN</td>
<td>48</td>
<td>DSI-CKP</td>
</tr>
<tr class="row-even"><td>49</td>
<td>GND</td>
<td>50</td>
<td>SPDIF-IN</td>
</tr>
<tr class="row-odd"><td>51</td>
<td>SPDIF-OUT</td>
<td>52</td>
<td>GND</td>
</tr>
<tr class="row-even"><td>53</td>
<td>I2S1-DIN</td>
<td>54</td>
<td>I2S1-BCLK</td>
</tr>
<tr class="row-odd"><td>55</td>
<td>I2S1-LRCK</td>
<td>56</td>
<td>I2S1-MCLK</td>
</tr>
<tr class="row-even"><td>57</td>
<td>EARGND2</td>
<td>58</td>
<td>LRADC0</td>
</tr>
<tr class="row-odd"><td>59</td>
<td>EARGND2</td>
<td>60</td>
<td>LRADC1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="expansion-gpio-j5">
<h3><a class="toc-backref" href="#id11">EXPANSION GPIO &#8212; J5</a><a class="headerlink" href="#expansion-gpio-j5" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="27%" />
<col width="27%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">引脚号</th>
<th class="head">功能</th>
<th class="head">引脚号</th>
<th class="head">功能</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>VCC-5V</td>
<td>2</td>
<td>VCC-5V</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>GND</td>
<td>4</td>
<td>VCC-LCD</td>
</tr>
<tr class="row-even"><td>5</td>
<td>VCC-LCD</td>
<td>6</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>UART4-TX</td>
<td>8</td>
<td>UART4-RX</td>
</tr>
<tr class="row-even"><td>9</td>
<td>GND</td>
<td>10</td>
<td>VCC-JTAG</td>
</tr>
<tr class="row-odd"><td>11</td>
<td>VCC-JTAG</td>
<td>12</td>
<td>AP-RESET#</td>
</tr>
<tr class="row-even"><td>13</td>
<td>TMS0</td>
<td>14</td>
<td>TCK0</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>TDO0</td>
<td>16</td>
<td>TDI0</td>
</tr>
<tr class="row-even"><td>17</td>
<td>JTAG-SEL0</td>
<td>18</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>19</td>
<td>SPI0-MOSI</td>
<td>20</td>
<td>SPI0-MISO</td>
</tr>
<tr class="row-even"><td>21</td>
<td>SPI0-CLK</td>
<td>22</td>
<td>SPI0-CS0</td>
</tr>
<tr class="row-odd"><td>23</td>
<td>GND</td>
<td>24</td>
<td>CSI2-D0N</td>
</tr>
<tr class="row-even"><td>25</td>
<td>CSI2-D0P</td>
<td>26</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>27</td>
<td>CSI2-D1N</td>
<td>28</td>
<td>CSI2-D1P</td>
</tr>
<tr class="row-even"><td>29</td>
<td>GND</td>
<td>30</td>
<td>CSI2-D2N</td>
</tr>
<tr class="row-odd"><td>31</td>
<td>CSI2-D2P</td>
<td>32</td>
<td>GND</td>
</tr>
<tr class="row-even"><td>33</td>
<td>CSI2-D3N</td>
<td>34</td>
<td>CSI2-D3P</td>
</tr>
<tr class="row-odd"><td>35</td>
<td>GND</td>
<td>36</td>
<td>DSI-D0P</td>
</tr>
<tr class="row-even"><td>37</td>
<td>CSI2-CKP</td>
<td>38</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>39</td>
<td>TWI3-SCK</td>
<td>40</td>
<td>TWI3-SDA</td>
</tr>
<tr class="row-even"><td>41</td>
<td>GND</td>
<td>42</td>
<td>MCS-MCLK1</td>
</tr>
<tr class="row-odd"><td>43</td>
<td>GND</td>
<td>44</td>
<td>CAM-R-STBY-EN</td>
</tr>
<tr class="row-even"><td>45</td>
<td>CAM-R-RESET#</td>
<td>46</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>47</td>
<td>PH0</td>
<td>48</td>
<td>PH1</td>
</tr>
<tr class="row-even"><td>49</td>
<td>PH2</td>
<td>50</td>
<td>PH3</td>
</tr>
<tr class="row-odd"><td>51</td>
<td>PH4</td>
<td>52</td>
<td>PH5</td>
</tr>
<tr class="row-even"><td>53</td>
<td>PH6</td>
<td>54</td>
<td>PH7</td>
</tr>
<tr class="row-odd"><td>55</td>
<td>PH8</td>
<td>56</td>
<td>PH29</td>
</tr>
<tr class="row-even"><td>57</td>
<td>PH30</td>
<td>58</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>59</td>
<td>USB-DP0</td>
<td>60</td>
<td>USB-DM0</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="expansion-lvds-j6">
<h3><a class="toc-backref" href="#id12">EXPANSION LVDS &#8212; J6</a><a class="headerlink" href="#expansion-lvds-j6" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="18%" />
<col width="18%" />
<col width="18%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">引脚号</th>
<th class="head">第一功能</th>
<th class="head">第二功能</th>
<th class="head">引脚号</th>
<th class="head">第一功能</th>
<th class="head">第二功能</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>LVDS0-D0P</td>
<td>LCD0-D0</td>
<td>2</td>
<td>LVDS0-D0N</td>
<td>LCD0-D1</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>GND</td>
<td>&nbsp;</td>
<td>4</td>
<td>LVDS0-D1P</td>
<td>LCD0-D2</td>
</tr>
<tr class="row-even"><td>5</td>
<td>LVDS0-D1N</td>
<td>LCD0-D3</td>
<td>6</td>
<td>GND</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>LVDS0-D2P</td>
<td>LCD0-D4</td>
<td>8</td>
<td>LVDS0-D2N</td>
<td>LCD0-D5</td>
</tr>
<tr class="row-even"><td>9</td>
<td>GND</td>
<td>&nbsp;</td>
<td>10</td>
<td>LVDS0-CLKP</td>
<td>LCD0-D6</td>
</tr>
<tr class="row-odd"><td>11</td>
<td>LVDS0-CLKN</td>
<td>LCD0-D7</td>
<td>12</td>
<td>GND</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>13</td>
<td>LVDS0-D3P</td>
<td>LCD0-D8</td>
<td>14</td>
<td>LVDS0-D3N</td>
<td>LCD0-D9</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>GND</td>
<td>&nbsp;</td>
<td>16</td>
<td>LVDS1-D0P</td>
<td>LCD0-D10</td>
</tr>
<tr class="row-even"><td>17</td>
<td>LVDS1-D0N</td>
<td>LCD0-D11</td>
<td>18</td>
<td>GND</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>19</td>
<td>LVDS1-D1P</td>
<td>LCD0-D12</td>
<td>20</td>
<td>LVDS1-D1N</td>
<td>LCD0-D13</td>
</tr>
<tr class="row-even"><td>21</td>
<td>GND</td>
<td>&nbsp;</td>
<td>22</td>
<td>LVDS1-D2P</td>
<td>LCD0-D14</td>
</tr>
<tr class="row-odd"><td>23</td>
<td>LVDS1-D2N</td>
<td>LCD0-D15</td>
<td>24</td>
<td>GND</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>25</td>
<td>LVDS1-CLKP</td>
<td>LCD0-D16</td>
<td>26</td>
<td>LVDS1-CLKN</td>
<td>LCD0-D17</td>
</tr>
<tr class="row-odd"><td>27</td>
<td>GND</td>
<td>&nbsp;</td>
<td>28</td>
<td>LVDS1-D3P</td>
<td>LCD0-D18</td>
</tr>
<tr class="row-even"><td>29</td>
<td>LVDS1-D3N</td>
<td>LCD0-D19</td>
<td>30</td>
<td>GND</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>31</td>
<td>LCD0-D20</td>
<td>&nbsp;</td>
<td>32</td>
<td>LCD0-D21</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>33</td>
<td>LCD0-D22</td>
<td>&nbsp;</td>
<td>34</td>
<td>LCD0-D23</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>35</td>
<td>LCD0-CLK</td>
<td>&nbsp;</td>
<td>36</td>
<td>LCD0-HSYNC</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>37</td>
<td>LCD0-DE</td>
<td>&nbsp;</td>
<td>38</td>
<td>LCD0-VSYNC</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>39</td>
<td>LCD-PWM</td>
<td>&nbsp;</td>
<td>40</td>
<td>LCD-BL-EN</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>41</td>
<td>GND</td>
<td>&nbsp;</td>
<td>42</td>
<td>CTP-WAKE</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>43</td>
<td>CTP-INT</td>
<td>&nbsp;</td>
<td>44</td>
<td>TWI1-SCK</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>45</td>
<td>TWI1-SDA</td>
<td>&nbsp;</td>
<td>46</td>
<td>GND</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>47</td>
<td>RTP-X1</td>
<td>&nbsp;</td>
<td>48</td>
<td>RTP-X2</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>49</td>
<td>RTP-Y1</td>
<td>&nbsp;</td>
<td>50</td>
<td>RTP-Y2</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>51</td>
<td>GND</td>
<td>&nbsp;</td>
<td>52</td>
<td>VCC2V8-LCD</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>53</td>
<td>VCC2V8-LCD</td>
<td>&nbsp;</td>
<td>54</td>
<td>VCC2V8-LCD</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>55</td>
<td>GND</td>
<td>&nbsp;</td>
<td>56</td>
<td>VCC1V8-LCD</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>57</td>
<td>VCC1V8-LCD</td>
<td>&nbsp;</td>
<td>58</td>
<td>GND</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>59</td>
<td>VCC-5V</td>
<td>&nbsp;</td>
<td>60</td>
<td>VCC-5V</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id13">GPIO 内核配置</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">本节中所说的内核配置针对全志提供的旧版内核，而非主流内核。不过方法相同。</p>
</div>
<p>在用户应用使用 GPIO 之前，需要在内核中配置 GPIO 的 sysfs 支持。具体的配置方式如下：</p>
<div class="highlight-sh"><div class="highlight"><pre>Device Drivers  ---&gt;
                GPIO Support  ---&gt;
                            /sys/class/gpio/... <span class="o">(</span>sysfs interface<span class="o">)</span>
</pre></div>
</div>
<p>在内核中，启用上述配置即可，默认在 <strong>arch/arm/configs/loftq_linux_defconfig</strong> 中已经启用了该配置。</p>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id14">GPIO 使用示例</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>使用上述配置生成的内核，然后可以在应用中通过下面的示例进行测试。下面分别是通过命令行和C语言进行访问和测试的方法，基本的过程如下：</p>
<ul>
<li><p class="first">根据 GPIO 名称计算实际对应的 gpio 编号</p>
<p>全志方案的 gpio 编号计算方式： <strong>(第二个字母在字母序列中的位置 - 1) x 32 + 针口编号</strong> 。例如 <strong>PC13</strong> 或者 <strong>pc13</strong> ，那么它的计算方式分别如下：</p>
<p><strong>pc13</strong> 的编号计算： (&#8216;c&#8217;-&#8216;a&#8217;)*32 + 13 ，结果为 77</p>
<p><strong>PC13</strong> 的编号计算： (&#8216;C&#8217;-&#8216;A&#8217;)*32 + 13 ，结果为 77</p>
</li>
<li><p class="first">导出 GPIO 访问路径和接口</p>
</li>
<li><p class="first">设置 GPIO 使用方式为输入或者输出</p>
</li>
<li><p class="first">GPIO 读取或者写入访问</p>
</li>
<li><p class="first">取消 GPIO 导出</p>
</li>
</ul>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id15">命令行访问和测试</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>我们以 &#8220;PC13&#8221; 为例作为测试。首先是确定其实际的 gpio 编号。根据前面介绍中的计算方式，可以知道 &#8220;PC13&#8221; 的 GPIO 编号为 <strong>77</strong> 。</p>
<ul>
<li><p class="first">导出 GPIO 访问路径命令：</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">echo </span><span class="m">77</span> &gt; /sys/class/gpio/export
</pre></div>
</div>
</li>
<li><p class="first">设置 GPIO 访问方式，输入或者输出，前一个为设置为输出模式，后一个设置为输入模式：</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">echo</span> <span class="s2">&quot;out&quot;</span> &gt; /sys/class/gpio/gpio77/direction
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">echo</span> <span class="s2">&quot;in&quot;</span> &gt; /sys/class/gpio/gpio77/direction
</pre></div>
</div>
</li>
<li><p class="first">如果设置为输出模式，下述分别为将 GPIO 设置为高和低的输出：</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">echo </span><span class="m">1</span> &gt; /sys/class/gpio/gpio77/value
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">echo </span><span class="m">0</span> &gt; /sys/class/gpio/gpio77/value
</pre></div>
</div>
</li>
<li><p class="first">如果设置为输入模式，可以通过下属命令读取当前 GPIO 的状态：</p>
<div class="highlight-sh"><div class="highlight"><pre>cat /sys/class/gpio/gpio77/value
</pre></div>
</div>
</li>
<li><p class="first">取消 GPIO 导出：</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">echo </span><span class="m">77</span> &gt; /sys/class/gpio/unexport
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="c">
<h3><a class="toc-backref" href="#id16">C语言访问和测试</a><a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h3>
<p>对于 C 语言的访问方式与上述方式相同，只是所有的文件打开和访问，写入操作均使用 C 语言的方法来完成。</p>
<p>具体的实现可以参考我们的 jennic-util 中所使用的 gpio 相关代码。</p>
<ul class="simple">
<li>gpio 参考： <a class="reference external" href="https://github.com/mixtile/jennic-utils/blob/master/util_gpio.c">https://github.com/mixtile/jennic-utils/blob/master/util_gpio.c</a></li>
<li>使用示例： <a class="reference external" href="https://github.com/mixtile/jennic-utils/blob/master/util_loftq.c">https://github.com/mixtile/jennic-utils/blob/master/util_loftq.c</a></li>
</ul>
</div>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id17">更多参考</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>linux-sunxi 社区 GPIO 使用： <a class="reference external" href="http://linux-sunxi.org/GPIO">http://linux-sunxi.org/GPIO</a></p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="zh-intro.html" class="btn btn-neutral float-right" title="LOFT-Q 简介" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="zh-android-network-debug.html" class="btn btn-neutral" title="Android adb 网络调试" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Mixtile Project.
      Last updated on Sep 18, 2015.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>